# Web / Frontend
NEXT_PUBLIC_SEARCH_URL=http://localhost:8001
NEXT_PUBLIC_GRAPH_URL=http://localhost:8002
NEXT_PUBLIC_NLP_URL=http://localhost:8003
NEXT_PUBLIC_DOCENTITIES_URL=http://localhost:8006
NEXT_PUBLIC_SUPERSET_URL=http://localhost:8083
NEXT_PUBLIC_ALEPH_BASE_URL=http://localhost:8082/api/2

# Backends

# Ports
GRAPH_VIEWS_PORT=8403

# App
IT_ENV=dev
IT_FORCE_READY=0
GV_ALLOW_WRITES=1   # für lokale Entwicklung praktisch

# Optional Basic Auth for WRITE endpoints (if set, required for ?write=1)
GV_BASIC_USER=dev
GV_BASIC_PASS=devpass

# Neo4j (Compose-Hostname im gemeinsamen Netz)
NEO4J_URI=bolt://it-neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=test12345
NEO4J_DATABASE=neo4j

# Optional tuning
NEO4J_MAX_CONN_LIFETIME=3600

# Frontend
NEXT_PUBLIC_VIEWS_API=http://localhost:8403
# Hinweis: In PROD GV_ALLOW_WRITES nicht aktivieren und Secrets nicht einchecken

# Search Reranking
RERANK_ENABLED=0
RERANK_TOPK=50
RERANK_MODEL=sentence-transformers/all-MiniLM-L6-v2
RERANK_TIMEOUT_MS=800

# Doc-Entities Resolver
RESOLVE_MATCH_THR=0.85
RESOLVE_AMBIG_MIN=0.60
RESOLVE_AUTOCREATE=0
GRAPH_WRITE_RELATIONS=1

# Aleph
ALEPH_API_KEY=changeme
ALLOW_DEMO_LOADER=1

# Observability
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin
PROMETHEUS_PORT=3412
GRAFANA_PORT=3413
ALERTMANAGER_PORT=3414
LOKI_PORT=3415
TEMPO_PORT=3416

# Tracing / OTEL (set IT_OTEL=1 to enable)
IT_OTEL=0
OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4318
OTEL_SERVICE_NAME=
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=dev

# Optional write rate limit (format: N/second|minute|hour)
GV_RATE_LIMIT_WRITE=20/minute
# Optional audit JSON logs to STDOUT for write requests
GV_AUDIT_LOG=1

# ---- v0.2 MUST feature envs (add if missing) ----
# Auth / OIDC
IT_AUTH_REQUIRED=0
IT_OIDC_ISSUER=http://localhost:8080/realms/infoterminal
IT_OIDC_AUDIENCE=infoterminal
IT_OIDC_JWKS_URL=http://localhost:8080/realms/infoterminal/protocol/openid-connect/certs

# Observability (opt-in)
IT_ENABLE_METRICS=0
IT_REQUEST_ID_HEADER=X-Request-Id

# Ports (authoritative via patch_ports.sh)
IT_PORT_FRONTEND=3411
IT_PORT_PROM=3412
IT_PORT_GRAFANA=3413
IT_PORT_ALERTMAN=3414
IT_PORT_LOKI=3415
IT_PORT_TEMPO=3416
IT_PORT_FLOWISE=3417
IT_PORT_GATEWAY=8610
IT_PORT_SEARCH_API=8611
IT_PORT_GRAPH_API=8612
IT_PORT_DOC_ENTITIES=8613

# Feature flags
IT_NEO4J_GDS=0
IT_ENRICH_DOCS=0
# Dossier
IT_DOSSIER_PDF=0
# NLP
NLP_DEFAULT_LANG=en
NLP_BACKEND=spacy           # spacy|transformers
NLP_SPACY_MODEL_EN=en_core_web_sm
NLP_SPACY_MODEL_DE=de_core_news_sm
# Agent / Flowise / n8n
AGENT_BASE_URL=http://localhost:3417
AGENT_TIMEOUT_MS=120000
AGENT_PLAYBOOKS=static
N8N_BASE_URL=http://localhost:5678
N8N_API_KEY=
N8N_WEBHOOK_URL=

# Geospatial
NEXT_PUBLIC_MAP_TILES=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
GEO_UPLOAD_DIR=/data/geo
# --- Plugin System ---
IT_PLUGINS_DIR=plugins
IT_PLUGINS_ENABLE=1
IT_PLUGIN_API_VERSION=v1
IT_PLUGINS_CACHE_TTL_SEC=30   # Discovery/Health Cache TTL

# (Optional) Audit Sink (später ClickHouse via Vector/OTEL)
IT_AUDIT_SINK=stdout          # stdout|clickhouse
CH_URL=http://localhost:8123
CH_DB=infoterminal_audit
CH_USER=default
CH_PASSWORD=

# Multi-Tenancy
IT_TENANCY_MODE=single        # single|multi
IT_TENANT_CLAIM=tenant        # OIDC claim für Tenant/Org
