# 📊 InfoTerminal Phase 2 Kick-off Status

_Last update: 2025-09-24 – generated after running `scripts/generate_inventory.py` and refreshing Phase 2 artefacts._

> ℹ️ **Wave tracker:** `backlog/phase2/PACKAGE_SEQUENCE.yaml` lists the active packages and gates for Phase 2.

## Executive Summary (Ampel)
- **Implementierungsgrad – 🟡**: 52 runtime-relevant services detected; core APIs (search, graph, doc-entities, verification) expose v1 contracts, but frontend workflows, ingest orchestration, and collaboration stacks remain partially stubbed. 【F:inventory/services.json†L1-L266】
- **Docs-Konsistenz – 🔴**: Historic inventories and roadmap notes lag behind current service surface; key docs (API inventory, roadmap intelligence) omit newer connectors and overlays. See [DOCS_DIFF.md](DOCS_DIFF.md) for prioritized deltas.
- **Observability-Abdeckung – 🟡**: Neues Baseline-Gate (J1 abgeschlossen) erzwingt `/healthz`, `/readyz`, `/metrics` mit Labels (`service`, `version`, `env`) über alle Applikationsservices; Infrastruktur-Overlays aus den Compose-Profilen bleiben ohne Probes. Trace-Propagation & Log-Korrelation (J2 abgeschlossen) liefern W3C-Weitergabe im Gateway, Demo-Trace-Route sowie Tempo-Dashboards für Latenz & Top-Endpunkte. SLO-Burn-Rate-Alerts und P95-Latenzprüfungen (J3 abgeschlossen) decken gateway, search-api, graph-api und doc-entities inklusive Pushgateway-Fake-Series zum Testen ab. 【F:inventory/observability.json†L1-L240】【F:scripts/check_observability_baseline.py†L1-L85】【F:inventory/findings.md†L1-L69】【F:services/gateway/app/app.py†L1-L200】【F:grafana/dashboards/api-slo.json†L1-L200】【F:monitoring/alerts/performance-alerts.yml†L1-L200】【F:docs/dev/observability.md†L1-L160】【F:docs/dev/slo.md†L1-L200】
- **Synthetic Uptime – 🟢**: Blackbox-Exporter + Prometheus Job (`synthetic-smoke`) überwachen Frontend, Search-, Graph- und Doc-Entities-APIs via `probe_success`; Grafana zeigt die Resultate im neuen Panel-Row „Synthetic Uptime“, das auch in `STATUS.md` verlinkte Runbooks (5xx-Burst, DB-Down, Rate-Limit-Storm) referenziert. CI-Gate `python scripts/synthetic_smoke.py --validate-only` stellt sicher, dass die Probe-Ziele offline erreichbar bleiben. 【F:observability/blackbox.yml†L1-L9】【F:observability/prometheus/prometheus.yml†L1-L60】【F:observability/prometheus/synthetic-smoke-targets.json†L1-L36】【F:docker-compose.observability.yml†L1-L80】【F:monitoring/grafana-dashboards/infoterminal-overview.json†L1296-L1400】【F:scripts/synthetic_smoke.py†L1-L200】【F:.github/workflows/ci.yml†L1-L120】【F:docs/runbooks/http-5xx-burst.md†L1-L40】【F:docs/runbooks/db-down.md†L1-L40】【F:docs/runbooks/rate-limit-storm.md†L1-L40】
- **Security-Reife – 🟡**: Auth-service, gateway, and OPA scaffolding exist, yet proxy hardening, plugin isolation, and geospatial data egress reviews are pending consolidation (rows below). Neu hinzugekommen: ein Source-SBOM/Lizenz-Gate (`sbom_source_integrity`) erzeugt deterministische Artefakte (`artifacts/sbom/source/*.cdx.json`, `artifacts/compliance/licenses/license_inventory.*`) via `scripts/generate_source_sbom.py` und verweist auf das aktualisierte Compliance-Dossier. 【F:scripts/generate_source_sbom.py†L1-L215】【F:scripts/check_sbom_source_integrity.py†L1-L60】【F:docs/compliance/licenses.md†L1-L60】
- **Release-Risiko – 🔴**: Without synchronized docs, backlog issues, or verified ingest-to-dossier flows, v1.0 cannot be certified; alignment tracked in [ROADMAP_STATUS.md](ROADMAP_STATUS.md) and [backlog/README.md](backlog/README.md).
- **Phase 2 Aktivierung – 🟡**: Wave 1 (Packages A & F) running per [`PACKAGE_SEQUENCE.yaml`](backlog/phase2/PACKAGE_SEQUENCE.yaml); README enthält jetzt 5-Minuten-Demo (Search → Graph → Dossier) und verweist auf Superset/Grafana Assets. Weitere Waves bleiben blockiert, bis Gates zweimal hintereinander grün sind.

> Baseline artefacts: **STATUS.md**, **DOCS_DIFF.md**, **ROADMAP_STATUS.md**, and the structured epics in **backlog/README.md**.

## Subsystem Matrix

| Scope | Implementiert | Belege (Dateien/Endpunkte) | Lücken / Blocker | Nächste Schritte (Roadmap-Paket) |
| --- | --- | --- | --- | --- |
| **Frontend (Next.js)** | Teil | 30 pages, 59 API routes, 26 Feature-Flags in `inventory/frontend.json`; Document Detail zeigt Resolver-Badges + Linking-Metrik, Graph UI & Dossier Panels bleiben verfügbar. **K1 (OIDC login) – done**: PKCE Login-/Callback-/Logout-Seiten, HttpOnly-Refresh-Cookie und Mock-IdP-Quickstart. **K2 (Route guards & Silent-Renew) – done**: SSR/CSR-Guards für Search/Graph/Dossier/Settings, 401-Interceptor mit Refresh-Retry sowie Remember-Me-Cookie mit verlängerter TTL. **K3 (RBAC UI & Admin Gates) – done**: JWT-Scopes werden zu `admin|ops|analyst|viewer` normalisiert; Ops-Tab, Plugin-Steuerung, Video-Analyse und Dossier-Export zeigen nur noch berechtigte Aktionen samt Hinweisbanner und Snapshot-Tests. **K4 (Dossier UX & Live Progress) – done**: Template-Selector lädt Collab-Hub-Katalog, `useTaskProgress` + `ProgressModal` liefern Live-Updates für Exporte, Plugins und Videoanalyse inkl. WebSocket-/Polling-Fallback. 【F:apps/frontend/src/server/oidc.ts†L200-L272】【F:apps/frontend/src/components/settings/OpsTab.tsx†L1-L220】【F:apps/frontend/pages/plugins/index.tsx†L1-L720】【F:apps/frontend/pages/media-forensics.tsx†L1-L520】【F:apps/frontend/src/components/dossier/panels/DossierExportPanel.tsx†L1-L220】【F:apps/frontend/tests/rbac-matrix.spec.ts†L1-L40】【F:apps/frontend/src/components/feedback/ProgressModal.tsx†L1-L200】【F:apps/frontend/src/hooks/useTaskProgress.ts†L1-L260】【F:apps/frontend/src/components/dossier/DossierBuilderModal.tsx†L1-L400】【F:apps/frontend/src/components/plugins/PluginRunner.tsx†L1-L400】 | Graph explorer hard-codes localhost APIs (bypassing config); dossier builder mocks exports; Linking-Badges stützen sich auf manuelle Demo-Daten – aktive Lernschleifen/feedback UI fehlen. | Align FE data access mit Gateway, finalisiere Dossier-Export & agent hooks (Packages C, F, H). |
| **Search (search-api)** | Ja | FastAPI v1 app with health/ready/metrics and extensive tests. 【F:inventory/services.json†L205-L226】【F:services/search-api/src/search_api/app/main_v1.py†L1-L120】【F:services/search-api/tests/test_metrics.py†L1-L120】 | OPA rules exist but enforcement coverage across gateways/frontends not yet validated; search UI uses fallback endpoints. | Harden authz path & propagate observability dashboards (Packages B, J, L). |
| **Graph & Ontologie (graph-api, graph-views)** | Teil | Analytics endpoints (degree, Louvain, shortest path, subgraph export) with Prometheus counters + Superset/Grafana assets delivered; geospatial helpers remain available. 【F:services/graph-api/app/routes/analytics.py†L1-L200】【F:services/graph-api/metrics.py†L1-L40】【F:apps/superset/assets/dashboard/graph_analytics_mvp.json†L1-L200】【F:grafana/dashboards/graph-analytics-mvp.json†L1-L200】 | Frontend graph explorer still hard-codes localhost APIs; ontology constraint validation + automated Superset import checks pending. | Align FE with gateway routing, add ontology validators + CI for dashboards before expanding geospatial overlays (Packages A, C, F). |
| **Doc-Entities / NLP** | Teil | Service liefert NER/Relationen, persistiert Entitäten, optional Graph-Writes; Resolver meldet Status/Confidence + Prometheus Counter (`doc_entities_linking_status_total`). 【F:inventory/services.json†L161-L184】【F:services/doc-entities/routers/doc_entities_v1.py†L200-L390】【F:services/doc-entities/metrics.py†L1-L68】 | Summaries/feedback weiterhin Mock; Active-Learning-Storage & Resolver-UI fehlen. | Finalize relation graph syncing, add evaluation datasets + feedback endpoints (Package B). |
| **Geospatial Layer** | Teil | `/geo/entities` & `/geo/entities/nearby` liefern BBox/Radius-Ergebnisse; Counters `graph_geo_queries_total`, `geo_query_count` + Fehlerzähler aktiv, README-Demo beschreibt Geo-Overlay. 【F:services/graph-api/app/routes/geospatial.py†L1-L220】【F:services/graph-api/metrics.py†L28-L40】【F:README.md†L63-L96】 | GeoJSON/OSM-Ingest & Geocoding-Opt-in fehlen; FE-Map nutzt Demo-Daten. | Automate ingest, expose gateway routes, dokumentiere Geocoding Add-on (Packages C, D). |
| **Verification & Media Forensics** | Teil | Verification FastAPI app with Prometheus middleware; media-forensics service now streams video frames with object detection + Graph ingest (`video_frames_processed_total`). 【F:services/media-forensics/video_pipeline.py†L1-L200】【F:services/media-forensics/routers/media_forensics_v1.py†L1-L420】【F:docs/media/video_pipeline.md†L1-L160】 | NiFi orchestration + frontend review UI pending; legacy endpoints remain for back-compat. | Wire NiFi ingest, extend FE dashboards, harden FFmpeg sandbox (Packages E, B). |
| **Flowise Connector / Agent Hub** | Teil | Flowise connector MVP with OPA-enforced six-tool registry, JSON parameter schema via `/tools`, mocked single-turn `/chat`, Prometheus counters + Grafana tiles; frontend ships `/agent/mvp` demo with policy-aware errors and an inline six-tool help panel. 【F:services/flowise-connector/app/main.py†L1-L360】【F:services/flowise-connector/tests/test_agents_mvp.py†L1-L90】【F:grafana/dashboards/infra-overview.json†L7-L40】【F:apps/frontend/pages/agent/mvp.tsx†L1-L220】 | Multi-agent orchestration + Flowise integration still stubbed; persistent conversations remain open alongside deeper audit integrations. | Extend to real tool backends, tighten audit sink + multi-turn workflows (Package H follow-up). |
| **NiFi / n8n / Workflows** | Teil | Compose overlays for NiFi & n8n, sample playbooks (`apps/n8n/*.json`). 【F:inventory/services.json†L266-L289】【F:apps/n8n/fact-checking-assistant-v2.json†L1-L80】 | No reproducible import scripts, retry/backoff configs undocumented, observability of flows absent. | Automate template deployment, add DLQ/backoff handling, document runbooks (Package D). |
| **Externe Feeds (RSS MVP)** | Teil | Feed ingestor service fetches/normalises RSS into mock search index with metrics + scheduler; docs cover offline demo. 【F:services/feed-ingestor/app/main.py†L118-L308】【F:services/feed-ingestor/tests/test_rss_connector.py†L1-L160】【F:docs/feeds/quickstart.md†L1-L120】 | Only RSS implemented; real search/graph ingest + secrets management pending. | Expand connectors (threat intel), persist to real search/graph stores, integrate with gateway policies (Package I follow-up). |
| **Dossier & Collaboration** | Teil | Collab-hub exports Markdown/PDF dossiers with templates, emits metrics and audit logs; feature-flagged notes + README demo cover end-to-end flow. 【F:services/collab-hub/app/main.py†L1-L220】【F:services/collab-hub/tests/test_dossier.py†L1-L60】【F:README.md†L51-L94】【F:examples/dossier/README.md†L1-L80】 | Audit sink still file-based (no Loki/Tempo pipeline) and FE dossier builder not yet wired to backend/notes auth. | Wire audit stream to observability stack, enforce case-level RBAC in FE, schedule architecture review after metrics dashboards stabilize (Package F). |
| **Plugins & Sandbox Runner** | Teil | Plugin-runner FastAPI app loads YAML registry, enforces timeouts + metrics (`plugin_run_total`) and ingests nmap results into Graph/Search. 【F:services/plugin-runner/app_v1.py†L1-L260】【F:services/plugin-runner/tests/test_nmap_ingest.py†L1-L60】【F:docs/plugins/quickstart.md†L1-L200】 | OPA policies + additional Kali plugins outstanding; Docker sandbox still optional for offline demos. | Harden sandbox policies, extend plugin catalogue, wire CLI automation (Package G). |
| **Ops & Egress Controls** | Teil | Egress gateway, ops-controller, and policy bundles present with compose wiring. 【F:inventory/services.json†L184-L205】【F:services/egress-gateway/app.py†L120-L210】【F:services/ops-controller/app/main.py†L1-L120】 | Health endpoints missing on infra services; proxy rotation logic lacks audit hooks; ops-controller ports duplicated in compose. | Harden egress auditing, unify observability, document rotation flows (Packages J, Security). |
| **Auth / RBAC / OPA** | Teil | Auth-service exposes full v1 scope, gateway proxies search/graph/views, policy bundles under `policy/`. 【F:inventory/services.json†L184-L205】【F:services/auth-service/src/auth_service/app_v1.py†L360-L760】【F:services/gateway/index.ts†L1-L120】 | Keycloak/SSO compose overlays exist but integration tests absent; FE login still stubbed in several pages. | Complete OIDC wiring in FE, add OPA regression tests, document RBAC roles (Packages J, K). |
| **Observability Stack** | Teil | Observability compose exposes Prometheus/Grafana/Loki/Tempo, but many services miss probes. 【F:inventory/services.json†L266-L289】【F:inventory/findings.md†L1-L69】 | Metrics absent for 37 services; alert thresholds undefined; logs/traces integration inconsistent. | Enforce observability DoD across services, ship Grafana dashboards + alert rules (Packages J, L). |
| **Infra / Compose / Envs** | Teil | 12 compose overlays + policy-specific files; CLI supports profile selection. 【F:inventory/services.json†L1-L392】【F:docker-compose.graph-views.yml†L1-L120】【F:cli/it_cli/root.py†L1-L80】 | Port policy drift (duplicates, host defaults exposed), `.env.example` coverage incomplete. | Normalize compose ports via inventory, document start/stop matrices (Packages J, Release). |
| **CLI & Tooling** | Teil | Typer-based CLI manages compose lifecycle, plugin scaffolding, and status reporting. 【F:cli/it_cli/root.py†L1-L120】【F:cli/it_cli/commands/status.py†L1-L160】 | CLI lacks inventory integration; tests not covering new commands; packaging instructions outdated. | Extend CLI to surface inventory and observability checks (Packages L, Release). |
| **Docs & Knowledge Base** | Nein | Legacy API inventory, empty roadmap intelligence, outdated port policy. 【F:docs/API_INVENTORY.md†L1-L80】【F:docs/ROADMAP-INTELLIGENCE.md†L1-L2】【F:docs/PORTS_POLICY.md†L1-L20】 | Docs diverge from code; no single baseline for backlog or release gating. | Execute DOCS_DIFF remediation, align docs with new inventory artefacts (Packages L, Release). |

## Observability Snapshot
- Observability Baseline (`python scripts/check_observability_baseline.py`) läuft nun im CI (`ci.yml`) und prüft das generierte Inventar auf Pflichtlabels + Endpunkte. 【F:scripts/check_observability_baseline.py†L1-L85】【F:.github/workflows/ci.yml†L1-L120】
- Infrastruktur-Services aus den Compose-Overlays fehlen weiterhin bei `/healthz`, `/readyz`, `/metrics`; Nachverfolgung via `inventory/findings.md`. 【F:inventory/findings.md†L1-L69】
- Compose overlays expose Prometheus/Grafana/Loki/Tempo on host ports 3412–3416. 【F:inventory/services.json†L266-L289】
- **J3 SLOs & Alerts – done**: Grafana liefert Availability/Latency/Error-SLIs je Kernservice, Prometheus überwacht Burn-Rates (1h/6h) und P95-Schwellen; Fake-Series via Pushgateway dienen zum Test-Feuer. 【F:grafana/dashboards/api-slo.json†L1-L200】【F:monitoring/alerts/performance-alerts.yml†L1-L200】【F:docs/dev/slo.md†L1-L200】

## Inventory Highlights
- Services inventory stored in `inventory/services.json`; API discovery in `inventory/apis.json`; database artefacts aggregated in `inventory/db.json`; frontend surface captured in `inventory/frontend.json`. 【F:inventory/services.json†L1-L392】【F:inventory/apis.json†L1-L20】【F:inventory/db.json†L1-L40】【F:inventory/frontend.json†L1-L210】
- Findings summary for missing probes/metrics resides in `inventory/findings.md`. 【F:inventory/findings.md†L1-L69】

## Traceability
- Detailed roadmap/package mapping: [ROADMAP_STATUS.md](ROADMAP_STATUS.md)
- Prioritized documentation fixes: [DOCS_DIFF.md](DOCS_DIFF.md)
- Issue backlog (epics & sub-issues): [backlog/README.md](backlog/README.md)
