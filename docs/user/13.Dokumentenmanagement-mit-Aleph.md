# 13. Dokumentenmanagement mit Aleph

Aleph ergänzt InfoTerminal um Funktionen für Dokumentaufnahme, -analyse und Investigations-Workflows. Die Integration verbindet Aleph mit Search API, Doc-Entities und dem Graph.

---

## 13.1 Architektur

```
NiFi/N8N → Aleph API → Doc-Entities → OpenSearch + Neo4j → Frontend (/documents, /search, /graphx)
```

- **Aleph** dient als Datenkatalog & UI für Dokumente, inkl. Deduplizierung.
- InfoTerminal konsumiert Aleph-Datensätze via NiFi (`FetchAlephDocument`) oder direkt über die Aleph REST API.
- Doc-Entities annotiert Texte (Entities, Relationen, Summaries) und schreibt Ergebnisse zurück in Search/Graph.

---

## 13.2 Setup

1. Aleph-Stack bereitstellen (`docs/dev/nifi-aleph.md` beschreibt Demo-Setup).
2. NiFi-Flow `aleph_ingest` importieren und Konfiguration (Tokens, Collection IDs) setzen.
3. Doc-Entities-Service konfigurieren (`GRAPH_WRITE_RELATIONS=1`, `ALLOW_TEST=0`).
4. Search-Index (`aleph_documents`) und Graph-Schema (Ontologie) anpassen.

---

## 13.3 Nutzung im Frontend

- `/documents` listet Aleph-Dokumente (Titel, Quelle, Tags, Entities, Status). Filters: Collection, Datum, Entity-Typ.
- Klick auf ein Dokument öffnet Metadaten, Entities, Relations, Fingerprints.
- **Annotate in Doc-Entities**: Ausgewählte Dokumente können erneut annotiert, resolved und in den Graph geschrieben werden.
- **Cross-Links**: Treffer erscheinen gleichzeitig in `/search` und `/graphx` (Node-Details zeigen verknüpfte Dokumente).

---

## 13.4 Best Practices

- **OCR**: In NiFi/Aleph aktivieren (Tesseract); reine Bild-PDFs vorher konvertieren.
- **Metadata Hygiene**: Quelle, Autor, Datum sauber pflegen → bessere Filter & Dossiers.
- **Collections**: Pro Fall/Projekt separate Collections anlegen.
- **Backups**: Aleph nutzt PostgreSQL/ElasticSearch – regelmäßig Snapshots ziehen.

---

## 13.5 Automatisierung

- n8n-Playbooks können Aleph Events (neue Dokumente) verarbeiten und Agenten/Verifikation triggern.
- Dossiers lassen sich mit Aleph-Dokumenten befüllen (ID-Referenzen), sodass Quellen jederzeit nachvollziehbar sind.
