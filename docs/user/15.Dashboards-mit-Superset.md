# 15. Dashboards mit Superset

Superset dient als BI-Frontend für strukturierte Analysen auf Basis von Graph-Views, OpenSearch und externen Datenquellen.

---

## 15.1 Start & Zugriff

```bash
docker compose -f docker-compose.superset-airflow.yml --profile superset up -d
# UI: http://localhost:8088 (Login: admin / admin)
```

Die Compose-Datei provisioniert automatisch Datenquellen für Postgres (`graph-views`) und OpenSearch. Weitere Datasources können über das Superset-UI hinzugefügt werden.

---

## 15.2 Datenquellen

- **Postgres (graph-views)** – materialisierte Views und Aggregationen (z. B. Entities, Relationen, KPIs).
- **OpenSearch** – Volltext-Indices (`documents`, `events`).
- **Custom** – Jede zusätzliche DB/API, z. B. Data Warehouses oder CSV-Dateien.

Verbindungseinstellungen sind in `deploy/superset/datasources` hinterlegt und können angepasst werden.

---

## 15.3 Dashboard-Beispiele

- **Investigation Overview**: Anzahl neuer Dokumente, Entities nach Typ, Verifizierungsstatus, Map mit Hotspots.
- **Compliance Radar**: Risk Scores, Alert-Counts, Graph KPIs (Top Centrality Nodes).
- **Operations**: Service Health (Prometheus als Datasource), Auslastung, Errors.

Dashboards lassen sich als JSON exportieren (→ Repo versionieren) oder automatisiert aktualisieren.

---

## 15.4 Deep Links & Drilldowns

- Superset-Charts können Deep Links zum Frontend enthalten (`/search?q=...`, `/graphx?focus=...`).
- URL-Parameter für Graph-Explorer (`/graphx?node=<id>`) oder Dossier (`/dossier?template=...`) ermöglichen nahtlose Übergänge.

---

## 15.5 Best Practices

- **Rollen & Rechte**: Superset-RBAC auf InfoTerminal-Rollen abstimmen (Viewer, Analyst, Admin).
- **CICD**: Dashboards via `superset export-dashboards` sichern; JSON ins Repo aufnehmen.
- **Caching**: Superset-Cache konfigurieren (Redis), damit aufwendige Queries nicht jedes Mal ausgeführt werden.
- **Airflow-Integration**: Compose-Profil enthält Airflow für geplante Datenpipelines (optional aktivieren).

Weitere Hinweise: `deploy/grafana` für technische Metriken; `docs/dev/analytics_frontend.md` beschreibt Widget-Aufbau im Frontend.
