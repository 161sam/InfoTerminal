# 3. Erste Schritte

## 3.1 Umgebung starten

1. **Services hochfahren** – am schnellsten mit der CLI:
   ```bash
   it start -f docker-compose.yml
   ```
   Alternativ `scripts/dev_up.sh` nutzen (siehe Kapitel 2). Nach wenigen Sekunden sind Search-/Graph-API, Graph-Views, Doc-Entities und das Frontend einsatzbereit.

2. **Status prüfen** – in der CLI (`it status`) oder über `http://localhost:3411/health`.

3. **Frontend öffnen** – `http://localhost:3411` (Standardport gemäß Port-Policy).

## 3.2 Anmeldung & Authentifizierung

- **Entwicklungsmodus**: Standardmäßig ist Single-Sign-On deaktiviert; beim ersten Aufruf wird eine Demo-Session erzeugt.
- **Produktiv & Demo mit OAuth2/OIDC**:
  ```bash
  docker compose -f docker-compose.sso.yml up -d
  ```
  - Keycloak-Demo-Realm: Benutzer `analyst / analyst123`. 
  - Das Frontend nutzt das Gateway bzw. den Auth-Service für Token-Validierung. Details siehe Kapitel 9.
- **Frontend-Config**: über `NEXT_PUBLIC_AUTH_ENABLED=1` und `NEXT_PUBLIC_GATEWAY_URL` aktivieren.

## 3.3 Navigationsüberblick

Die Startseite zeigt eine personalisierte Übersicht (zuletzt verwendete Services, Health-Checks, Quicklinks). Die linke Sidebar (Role-aware) enthält u. a.:

| Route | Zweck |
| ----- | ----- |
| `/search` | Volltextsuche, Filters, Map-Ansicht, Export |
| `/graphx` | Graph-Explorer, Cypher, Algorithmen, Geo-Layer |
| `/documents` | Dokumentbibliothek (Aleph-Integration, Metadaten) |
| `/nlp` | Doc-Entities UI für Annotation & Summaries |
| `/dossier` | Dossier-Lite Builder & Export |
| `/verification` | Claim/Evidence/Stance Analyse |
| `/agent` | Flowise-Agenten (Chat & Management) |
| `/analytics` | Nutzungsmetriken, Trends (Mock-Daten, s. Hinweis) |
| `/plugins` | Plugin-Verwaltung & Health |
| `/settings` | Endpoints, Gateway, Ops, Security, User-Management |

Globale Elemente: Service-Status in der Kopfzeile, Schnellaktionen (neue Suche, Dossier erstellen), Benachrichtigungs-Center, Dark/Light-Theme Switch.

## 3.4 Erste Suche durchführen

1. Öffne `/search` und gib eine Query ein (z. B. *"ACME Corp"*).
2. Passe Filter an: Typ (Dokument, Entity, Relation), Zeitraum, Quelle, Score-Schwelle.
3. Aktiviere optional **Semantisches Reranking** (`Rerank`-Toggle) – erfordert aktivierte Embedding-Modelle.
4. Nutze den **Map-Toggle**, um Geo-Treffer zu visualisieren (setzt GeoJSON-Daten voraus).
5. Export über das *Download*-Symbol (`JSON`-Bundle mit Query, Treffern & Statistiken).

## 3.5 Dokumente annotieren (Doc-Entities)

1. Navigiere zu `/nlp`.
2. Text einfügen oder PDF hochladen (max. 5 MB im Demo-Modus).
3. Optionen wählen: Entitäten extrahieren, Relationen erkennen, Zusammenfassung generieren, in den Graph schreiben.
4. Ergebnis: Farbig markierte Entitäten, JSON-Panel, Relationsgraph und Summary. Über *Resolve Entities* werden Entitäten mit dem Graph abgeglichen.
5. API-Endpunkte siehe Kapitel 4.2; CLI-Beispiel: `it graph.cypher "MATCH (e:Entity) RETURN count(e)"` nach erfolgreicher Annotation.

## 3.6 Graphanalyse & Geospatial

1. `/graphx` öffnen – der Header zeigt Live-Health von Graph API & Views API.
2. Tabs nutzen:
   - **Explorer**: Browse von Startknoten, On-the-fly-Expansion, Community & Centrality-Marker.
   - **Query**: Cypher-Editor (inkl. Templates & Ergebnis-Tabelle).
   - **Analysis**: Algorithmen (Degree/Beteenness, Louvain, Kürzeste Pfade) mit Ergebnislisten & Download.
   - **Tools**: Graph-Export (`JSON`, `GraphML`), GeoJSON-Upload, Ontologie-Browser.
3. **Map-Overlay** aktivieren → Knoten mit Koordinaten erscheinen georeferenziert. GeoJSON-Dateien können über Graph-Views (`/v1/geo/upload`) hinzugefügt werden.
4. CLI: `it graph neighbors <nodeId> --depth 2 --visualize` zeigt Adjazenz als Baumdiagramm.

## 3.7 Verification Center nutzen

1. `/verification` aufrufen und Tab **Extract Claims** wählen.
2. Text einfügen oder Dokument auswählen → Claims werden mit Confidence-Werten erzeugt.
3. Mit **Find Evidence** passende Quellen recherchieren (Web, News, interne Repositories – abhängig von Konfiguration der Verification-Services).
4. **Classify Stance** analysiert, ob Evidenz eine Behauptung stützt/widerspricht.
5. **Credibility** bewertet Quellenqualität, Reputation und Time/Geo-Kohärenz.
6. Ergebnisse lassen sich als JSON exportieren oder in ein Dossier übernehmen.

## 3.8 Dossier-Lite Builder

1. `/dossier` öffnen und ein Template (z. B. *Investigation Briefing*) wählen oder „Custom Dossier“ starten.
2. Items aus Suche, Graph, Dokumenten oder Freitext hinzufügen. Drag & Drop für Reihenfolge.
3. Einstellungen definieren: Sprache, Confidence-Schwelle, Summaries/Timeline/Visualisierungen.
4. **Generate Dossier** → Mock-Service liefert Markdown + PDF-Link. In produktiven Deployments wird der Dossier-Service angebunden.
5. Über „Export“ stehen `Markdown`, `PDF (Beta)` und `JSON` zur Verfügung.

## 3.9 Einstellungen & Profile

- **Endpoints Tab**: Frontend-seitig konfigurierte URLs für Search/Graph/Views/Doc-Entities/Gateway anpassen.
- **Ops Tab** (wenn `IT_OPS_ENABLE=1`): Docker-Stacks aus UI starten/stoppen, Logs abrufen.
- **Gateway Tab**: Upstreams, Rate Limits, Request Mirroring konfigurieren.
- **Security Tab**: MFA, Passwort-Policy, Allowed Origins (schreibgeschützt in Demo).
- **User Management**: Rollen `analyst`, `admin`, `ops` verwalten (Demo-Modus).

## 3.10 Nächste Schritte

- Beobachte Systemmetriken über `/analytics` (Mock-Daten) oder externe Dashboards (Kapitel 6 & 15).
- Aktiviere Agenten über `NEXT_PUBLIC_FEATURE_AGENT=1` und starte den Flowise-Connector (`AGENTS=1`). Im `/agent`-Tab erscheinen Chat-Interface, Agent-Konfigurationen und Logs.
- Richte NiFi-Flows ein (Kapitel 14), verbinde sie mit Search-/Doc-Entities-APIs und experimentiere mit n8n-Playbooks.
- Ergänze die Ontologie (`services/graph-views/ontology`) und aktualisiere Graph-Views für eigene Datendomänen.

Kapitel 4 vertieft die Kernfunktionen und verweist auf relevante APIs & Services.
