# 16. Anhang

---

## 16.1 Port-Übersicht

| Service | Host-Port | Hinweis |
| ------- | --------- | ------- |
| Frontend (Next.js) | 3411 | Next.js Dev/Prod |
| Search API | 8401 (Dev) / 8611 (Docker) | FastAPI, OpenSearch-Backend |
| Graph API | 8402 / 8612 | FastAPI, Neo4j |
| Graph-Views | 8403 (interner Port 8000) | Zugriff via Gateway oder direkte Bindung |
| Doc-Entities | 8406 / 8613 | NLP & Dokumentannotation |
| Gateway | 8610 | Proxy mit OAuth/OIDC |
| Flowise-Connector | 3417 | Agent-API |
| Prometheus | 3412 | Observability-Profil |
| Grafana | 3413 | Dashboards |
| Alertmanager | 3414 | Alert Routing |
| Loki | 3415 | Logs |
| Tempo | 3416 | Traces |
| NiFi | 8080 | Datenaufnahme |
| Superset | 8088 | BI-Dashboards |

`patch_ports.sh` aktualisiert Host-Ports gemäß Policy („keine Standardports“).

---

## 16.2 Wichtige Umgebungsvariablen

```env
# Kernservices
NEXT_PUBLIC_SEARCH_API=http://127.0.0.1:8401
NEXT_PUBLIC_GRAPH_API=http://127.0.0.1:8402
NEXT_PUBLIC_VIEWS_API=http://127.0.0.1:8403
NEXT_PUBLIC_DOC_ENTITIES_API=http://127.0.0.1:8406
NEXT_PUBLIC_GATEWAY_URL=http://127.0.0.1:8610

# Feature Flags
NEXT_PUBLIC_FEATURE_AGENT=0
NEXT_PUBLIC_FEATURE_NLP=1
NEXT_PUBLIC_FEATURE_WORKFLOWS=0
NEXT_PUBLIC_FEATURE_MULTI_AGENT=0

# Observability
IT_ENABLE_METRICS=0
IT_OTEL=0
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# Auth/Gateway
JWT_SECRET_KEY=change-me
CORS_ORIGINS=http://localhost:3411
OPA_URL=http://localhost:8181/v1/data

# Dev Scripts
DEV_LOCAL=0
OBS=0
AGENTS=0
GW=0
```

Weitere Variablen in `.env.example`, `.env.dev.ports` und den Compose-Dateien.

---

## 16.3 Ressourcen & Verzeichnisse

| Pfad | Inhalt |
| ---- | ------ |
| `docs/dev/` | Entwicklerhandbücher (Observability, Security, Testing, Roadmaps) |
| `services/_shared/` | Code-Sharing (Middleware, Logging, Health) |
| `scripts/` | Automationsskripte (`dev_up.sh`, `patch_ports.sh`, Build/Tests) |
| `examples/` | Beispieldaten, Workspace-Integrationen |
| `tests/` | v1.0 Test-Suite (Integration, Regression, Chaos, Performance) |
| `deploy/` | Provisioning (Grafana, Alertmanager, Superset, Terraform/Helm Skeletons) |

---

## 16.4 Test- und Qualitätschecks

```bash
make lint          # striktes Linting (Python + TS)
make format        # Autoformat
make gv.venv       # Lokale Virtualenv (Graph Views)
pytest             # Python Tests
npm -w apps/frontend run test
./tests/run_all_tests.sh  # v1.0 Master Suite (langsam)
```

---

## 16.5 Glossar (Auszug)

- **Doc-Entities** – NLP-Service (Entities, Relationen, Summaries, Fuzzy Matching).
- **Graph-Views** – View-/Ontology-Service auf Postgres.
- **Flowise** – Low-Code LLM-Agentenbaukasten.
- **NiFi/n8n** – Datenaufnahme bzw. Workflow-Automation.
- **OPA** – Open Policy Agent für Richtlinien.
- **RAG-API** – Retrieval-Augmented-Generation-Service.
- **Plugin-Runner** – Sandbox für OSINT-/Security-Tools.
- **Verification Center** – Claim/Evidence/Stance Analysemodul.
- **Observability Profile** – Prometheus, Grafana, Loki, Tempo, Alertmanager.

---

## 16.6 Lizenz & Contributing

- Lizenz: **Apache 2.0** – freie Nutzung, Änderungen und Distribution.
- Contributing: Pull Requests mit Tests & Dokumentation willkommen.
- Commits: **Conventional Commits**.
- Coding Standards: Python (PEP8/Black/Ruff), TypeScript (ESLint/Prettier), Markdown (cSpell).

Weitere Hinweise in `CONTRIBUTING.md` und `SECURITY.md`.
