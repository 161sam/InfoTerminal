# 8. Integrationen & Erweiterbarkeit

InfoTerminal setzt auf offene Standards und interoperable Komponenten. Dieses Kapitel zeigt, wie externe Systeme angebunden werden können – von Ingest über Agenten bis zu Workspaces.

---

## 8.1 Apache NiFi – Datenaufnahme & ETL

- **Flows** liegen im Repo (`docs/dev/nifi-ingest-demo.xml`, `docs/dev/nifi-aleph.md`).
- Typische Schritte: Load → Normalise → Enrich → Route → Index (OpenSearch/Neo4j).
- Unterverzeichnisse `infra/nifi` enthalten Templates für File Watcher, REST Pull, RSS, Social Media.
- Konnektoren für Aleph (Upload), Doc-Entities, Search-API und Graph-API sind vorbereitet (`InvokeHTTP`).
- Deployment: `docker compose -f docker-compose.nifi.yml --profile nifi up -d` (UI: `http://localhost:8080/nifi`).

**Best Practices**
- Kleine modulare Flows statt monolithischer Pipelines.
- Provenance & Fehlerpfade aktivieren.
- Secrets per Parameter Context oder Vault injizieren.

---

## 8.2 n8n – Workflows & Alerts

- `docker compose -f docker-compose.agents.yml --profile n8n up -d` startet n8n (Port 5678).
- Playbook-Beispiele (`docs/dev/guides/preset-profiles.md`): Daily Briefing, Verification Alerts, Dossier Export.
- Trigger: Webhooks, Cron, Agent Webhooks, Slack/Teams/Email.
- Integration mit InfoTerminal über REST (`/api/search`, `/api/graph`) oder CLI (`it ...`).

---

## 8.3 Flowise & Agent Connector

- Flowise-Connector (`services/flowise-connector`) bündelt Agent-APIs, Tool-Authentifizierung, Caching.
- Aktivierung über `AGENTS=1` bzw. `docker compose -f docker-compose.agents.yml --profile agents up -d`.
- Frontend `/agent` bietet Chat-UI, Tool-Auswahl, Playbook-Trigger.
- Tools (`apps/frontend/src/lib/agent-config.ts`): Suche, Graph, Doc-Entities, Verification, Media Forensics, Custom HTTP.
- Multi-Agent-Unterstützung & Logging (Structured) – Ergebnisse können in Dossiers übertragen werden.

---

## 8.4 Workspace-Integrationen (AppFlowy, AFFiNE, WaveTerm)

- **AppFlowy/AFFiNE**: Dossiers & Notizen können exportiert/importiert werden (Markdown/JSON). Integrations-Skripte unter `examples/workspaces/`.
- **WaveTerm**: InfoTerminal-CLI als Plugin, Terminal im Browser (`/plugins`). `plugins/waveterm.json` enthält Presets.
- **CRDT-basierte Shared Notes**: `collab-hub` stellt WebSocket-Kanäle bereit; UI-Komponenten in `/collab` (Beta).

---

## 8.5 Plugin-Ökosystem

- Plugins werden über YAML-Metadaten (`plugins/*.yaml`) registriert.
- Kategorien: OSINT (z. B. `shodan_lookup`), Forensics (`exiftool`), Compliance (`lei_lookup`), Custom Scripts.
- Ausführung über Plugin-Runner-API (`POST /v1/plugins/run`) oder Frontend `/plugins`.
- Ergebnisdateien liegen in `plugins/results`. CLI/Agenten können diese weiterverarbeiten.

---

## 8.6 Schnittstellen zu Drittsystemen

- **OpenBB-Connector** (Finanzdaten): `services/openbb-connector` mit REST-Proxy.
- **RAG-API**: Embedding-Retrieval aus externen Dokumentkorpora.
- **NiFi → Aleph**: Upload in Investigations-Datensets, Re-Use von Aleph UIs.
- **Gateway**: Reverse Proxy für Legacy-Services / Federated Deployments.
- **Webhooks**: Graph-API & Doc-Entities unterstützen Webhook-Benachrichtigungen (konfigurierbar via ENV `WEBHOOK_*`).

---

## 8.7 Erweiterung per Code

- **Python SDK** (Services): `_shared/` enthält Logging, API-Standards, Health-Checker.
- **TypeScript SDK** (Frontend): Komponentenbibliothek (`apps/frontend/src/components`), Hooks, API-Clients (`/lib/api`).
- **CLI Plugins**: `setup.cfg` Entry Points → Typer-Apps hinzufügen.
- **Helm/Compose**: Charts unter `charts/`, Compose-Dateien (Gateway, Agents, Observability) lassen sich modulartig kombinieren.

Weitere Integrationsbeispiele sind in `docs/dev/guides/` und den Demo-Skripten in `examples/` dokumentiert.
